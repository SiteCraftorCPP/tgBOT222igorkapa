# Логика RESET

## RESET возможен ТОЛЬКО в двух случаях:

### A. По росту цены от минимума падения:
Процент зависит от максимального достигнутого уровня:
- Level 1 (-8%): RESET при росте +3% от минимума
- Level 2 (-12%): RESET при росте +4% от минимума  
- Level 3 (-16%): RESET при росте +5% от минимума
- Level 4 (-20%): RESET при росте +6% от минимума
- Level 5 (-24%): RESET при росте +7% от минимума

### B. Через 2 часа после последнего сигнала:
Если прошло 2 часа с момента последнего сигнала, происходит RESET.

---

## ВАЖНО: Обновление локального максимума НЕ вызывает RESET!

Когда цена выросла выше текущего максимума на 0.01% или больше:
- Обновляется `local_max` (новый пик)
- Обновляется `local_max_time`
- НО `triggered_levels` НЕ обнуляются!
- НО `local_min` НЕ обновляется!

Это просто отслеживание нового пика, не RESET.

RESET происходит ТОЛЬКО когда:
1. Цена выросла от `local_min` на нужный процент (зависит от уровня)
2. ИЛИ прошло 2 часа после последнего сигнала

---

## Пример:

```
Ситуация:
- local_max = 0.0110€
- local_min = 0.0097€ (минимум после падения -11.8%)
- triggered_levels = [2] (Level 2 сработал)
- current_price = 0.0103€

1. Цена выросла до 0.0103€ от максимума 0.0110€ = -6.4% (всё ещё падение)
   → Максимум НЕ обновляется (цена ниже максимума)
   → RESET НЕ происходит

2. Цена выросла до 0.0115€ (выше максимума на +4.5%)
   → Максимум обновляется: local_max = 0.0115€
   → triggered_levels остаются: [2] (НЕ обнуляются!)
   → local_min остаётся: 0.0097€
   → RESET НЕ происходит!

3. Цена выросла до 0.0101€ от минимума 0.0097€ = +4.1%
   → Максимальный уровень был Level 2 (-12%)
   → Нужный процент для RESET: +4%
   → Фактический рост: +4.1% >= +4%
   → RESET происходит!
   → triggered_levels = []
   → local_max = 0.0101€
   → local_min = 0.0101€
```
